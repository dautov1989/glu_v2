<div x-data="{ 
    showCarbsTable: false,
    modalTotalCarbs: 0,
    modalItemCount: 0,
    selectedItems: [],
    foodCategories: [
        {
            name: 'Ð¥Ð»ÐµÐ± Ð¸ Ð²Ñ‹Ð¿ÐµÑ‡ÐºÐ°',
            icon: 'ðŸž',
            color: 'bg-amber-500',
            items: [
                { name: 'Ð¥Ð»ÐµÐ± Ð±ÐµÐ»Ñ‹Ð¹ (1 Ð»Ð¾Ð¼Ñ‚Ð¸Ðº, 30Ð³)', carbs: 15 },
                { name: 'Ð¥Ð»ÐµÐ± Ñ‡Ñ‘Ñ€Ð½Ñ‹Ð¹ (1 Ð»Ð¾Ð¼Ñ‚Ð¸Ðº, 30Ð³)', carbs: 13 },
                { name: 'Ð¥Ð»ÐµÐ± Ð‘Ð¾Ñ€Ð¾Ð´Ð¸Ð½ÑÐºÐ¸Ð¹ (1 Ð»Ð¾Ð¼Ñ‚Ð¸Ðº, 35Ð³)', carbs: 15 },
                { name: 'Ð‘Ð°Ñ‚Ð¾Ð½ (1 Ð»Ð¾Ð¼Ñ‚Ð¸Ðº, 25Ð³)', carbs: 12 },
                { name: 'Ð‘ÑƒÐ»Ð¾Ñ‡ÐºÐ° (1 ÑˆÑ‚, 50Ð³)', carbs: 25 },
                { name: 'Ð‘Ð»Ð¸Ð½ (1 ÑˆÑ‚, 50Ð³)', carbs: 15 },
                { name: 'Ð›Ð°Ð²Ð°Ñˆ (50Ð³)', carbs: 24 },
                { name: 'Ð¡Ñ‹Ñ€Ð½Ð¸Ðº (1 ÑˆÑ‚, 50Ð³)', carbs: 10 },
                { name: 'ÐŸÐµÑ‡ÐµÐ½ÑŒÐµ (1 ÑˆÑ‚, 10Ð³)', carbs: 7 },
                { name: 'Ð¡ÑƒÑˆÐºÐ°/Ð‘Ð°Ñ€Ð°Ð½ÐºÐ° (1 ÑˆÑ‚, 15Ð³)', carbs: 10 }
            ]
        },
        {
            name: 'ÐšÑ€ÑƒÐ¿Ñ‹ Ð¸ Ð³Ð°Ñ€Ð½Ð¸Ñ€Ñ‹ (Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ)',
            icon: 'ðŸš',
            color: 'bg-emerald-500',
            items: [
                { name: 'Ð Ð¸Ñ Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ð¾Ð¹ (100Ð³)', carbs: 26 },
                { name: 'Ð“Ñ€ÐµÑ‡ÐºÐ° Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ð°Ñ (100Ð³)', carbs: 18 },
                { name: 'ÐœÐ°ÐºÐ°Ñ€Ð¾Ð½Ñ‹ Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ñ‹Ðµ (100Ð³)', carbs: 25 },
                { name: 'ÐŸÑŽÑ€Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒÐ½Ð¾Ðµ (100Ð³)', carbs: 15 },
                { name: 'ÐŸÐ»Ð¾Ð² Ñ Ð¼ÑÑÐ¾Ð¼ (100Ð³)', carbs: 28 },
                { name: 'ÐžÐ²ÑÑÐ½Ð°Ñ ÐºÐ°ÑˆÐ° (100Ð³)', carbs: 15 },
                { name: 'Ð‘ÑƒÐ»Ð³ÑƒÑ€ Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ð¾Ð¹ (100Ð³)', carbs: 19 },
                { name: 'ÐŸÐµÑ€Ð»Ð¾Ð²ÐºÐ° Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ð°Ñ (100Ð³)', carbs: 22 },
                { name: 'Ð§ÐµÑ‡ÐµÐ²Ð¸Ñ†Ð° Ð¾Ñ‚Ð²Ð°Ñ€Ð½Ð°Ñ (100Ð³)', carbs: 20 },
                { name: 'ÐšÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ Ð¶Ð°Ñ€ÐµÐ½Ñ‹Ð¹ (100Ð³)', carbs: 25 }
            ]
        },
        {
            name: 'ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°',
            icon: 'ðŸ²',
            color: 'bg-rose-500',
            items: [
                { name: 'ÐŸÐµÐ»ÑŒÐ¼ÐµÐ½Ð¸ (100Ð³ ~6 ÑˆÑ‚)', carbs: 28 },
                { name: 'Ð’Ð°Ñ€ÐµÐ½Ð¸ÐºÐ¸ Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÐµÐ¼ (100Ð³)', carbs: 30 },
                { name: 'ÐšÐ¾Ñ‚Ð»ÐµÑ‚Ð° Ð¼ÑÑÐ½Ð°Ñ (1 ÑˆÑ‚, Ñ…Ð»ÐµÐ± Ð²Ð½ÑƒÑ‚Ñ€Ð¸)', carbs: 5 },
                { name: 'Ð“Ð¾Ð»ÑƒÐ±Ñ†Ñ‹ (100Ð³)', carbs: 10 },
                { name: 'Ð‘Ð¾Ñ€Ñ‰ (250Ð¼Ð», ÑÑ€ÐµÐ´Ð½ÑÑ Ñ‚Ð°Ñ€ÐµÐ»ÐºÐ°)', carbs: 12 },
                { name: 'Ð¡Ð¾ÑÐ¸ÑÐºÐ° (1 ÑˆÑ‚)', carbs: 2 },
                { name: 'Ð‘Ð»Ð¸Ð½Ñ‡Ð¸Ðº Ñ Ñ‚Ð²Ð¾Ñ€Ð¾Ð³Ð¾Ð¼ (1 ÑˆÑ‚)', carbs: 18 },
                { name: 'ÐžÐ¼Ð»ÐµÑ‚ (Ð¸Ð· 2 ÑÐ¸Ñ† Ñ Ð¼Ð¾Ð»Ð¾ÐºÐ¾Ð¼)', carbs: 3 }
            ]
        },
        {
            name: 'Ð¤Ð°ÑÑ‚Ñ„ÑƒÐ´ Ð¸ Ð¿ÐµÑ€ÐµÐºÑƒÑÑ‹',
            icon: 'ðŸ”',
            color: 'bg-yellow-500',
            items: [
                { name: 'Ð¨Ð°ÑƒÑ€Ð¼Ð°/Ð”Ð¾Ð½ÐµÑ€ (1 ÑˆÑ‚, ~350Ð³)', carbs: 55 },
                { name: 'Ð‘ÑƒÑ€Ð³ÐµÑ€ ÐºÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ (1 ÑˆÑ‚)', carbs: 40 },
                { name: 'ÐšÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ Ñ„Ñ€Ð¸ (ÑÑ€ÐµÐ´Ð½Ð¸Ð¹, 100Ð³)', carbs: 35 },
                { name: 'ÐŸÐ¸Ñ€Ð¾Ð¶Ð¾Ðº Ñ ÐºÐ°Ñ€Ñ‚Ð¾ÑˆÐºÐ¾Ð¹ (1 ÑˆÑ‚)', carbs: 25 },
                { name: 'ÐŸÐ¸Ñ€Ð¾Ð¶Ð¾Ðº Ñ Ð¼ÑÑÐ¾Ð¼ (1 ÑˆÑ‚)', carbs: 20 },
                { name: 'Ð§ÐµÐ±ÑƒÑ€ÐµÐº (1 ÑˆÑ‚, ~100Ð³)', carbs: 25 },
                { name: 'Ð¡Ð¾ÑÐ¸ÑÐºÐ° Ð² Ñ‚ÐµÑÑ‚Ðµ (1 ÑˆÑ‚)', carbs: 28 },
                { name: 'ÐÐ°Ð³Ð³ÐµÑ‚ÑÑ‹ (6 ÑˆÑ‚)', carbs: 15 },
                { name: 'Ð¥Ð¾Ñ‚-Ð´Ð¾Ð³ ÐºÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ (1 ÑˆÑ‚)', carbs: 30 },
                { name: 'Ð¡ÑÐ½Ð´Ð²Ð¸Ñ‡ Ñ Ð²ÐµÑ‚Ñ‡Ð¸Ð½Ð¾Ð¹ (1 ÑˆÑ‚)', carbs: 25 }
            ]
        },
        {
            name: 'Ð¤Ñ€ÑƒÐºÑ‚Ñ‹ Ð¸ ÑÐ³Ð¾Ð´Ñ‹',
            icon: 'ðŸŽ',
            color: 'bg-red-500',
            items: [
                { name: 'Ð¯Ð±Ð»Ð¾ÐºÐ¾ (1 ÑÑ€ÐµÐ´Ð½ÐµÐµ, 150Ð³)', carbs: 18 },
                { name: 'Ð‘Ð°Ð½Ð°Ð½ (1 ÑÑ€ÐµÐ´Ð½Ð¸Ð¹, 120Ð³)', carbs: 25 },
                { name: 'ÐÐ¿ÐµÐ»ÑŒÑÐ¸Ð½ (1 ÑÑ€ÐµÐ´Ð½Ð¸Ð¹, 150Ð³)', carbs: 15 },
                { name: 'Ð“Ñ€ÑƒÑˆÐ° (1 ÑÑ€ÐµÐ´Ð½ÑÑ, 150Ð³)', carbs: 16 },
                { name: 'ÐœÐ°Ð½Ð´Ð°Ñ€Ð¸Ð½ (1 ÑˆÑ‚, 80Ð³)', carbs: 8 },
                { name: 'Ð’Ð¸Ð½Ð¾Ð³Ñ€Ð°Ð´ (100Ð³)', carbs: 18 },
                { name: 'ÐÑ€Ð±ÑƒÐ· (200Ð³ Ð¼ÑÐºÐ¾Ñ‚Ð¸)', carbs: 12 },
                { name: 'Ð”Ñ‹Ð½Ñ (200Ð³ Ð¼ÑÐºÐ¾Ñ‚Ð¸)', carbs: 15 },
                { name: 'ÐšÐ»ÑƒÐ±Ð½Ð¸ÐºÐ° (100Ð³)', carbs: 7 },
                { name: 'Ð¡Ð¾Ðº Ñ„Ñ€ÑƒÐºÑ‚Ð¾Ð²Ñ‹Ð¹ (200Ð¼Ð»)', carbs: 24 }
            ]
        },
        {
            name: 'ÐžÐ²Ð¾Ñ‰Ð¸ Ð¸ ÑÐ°Ð»Ð°Ñ‚Ñ‹',
            icon: 'ðŸ¥•',
            color: 'bg-orange-500',
            items: [
                { name: 'ÐšÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ Ð²Ð°Ñ€Ñ‘Ð½Ñ‹Ð¹ (100Ð³)', carbs: 17 },
                { name: 'Ð’Ð¸Ð½ÐµÐ³Ñ€ÐµÑ‚ (100Ð³)', carbs: 10 },
                { name: 'Ð¡Ð°Ð»Ð°Ñ‚ ÐžÐ»Ð¸Ð²ÑŒÐµ (100Ð³)', carbs: 8 },
                { name: 'ÐœÐ¾Ñ€ÐºÐ¾Ð²ÑŒ ÑÑ‹Ñ€Ð°Ñ (100Ð³)', carbs: 7 },
                { name: 'Ð¡Ð²Ñ‘ÐºÐ»Ð° Ð²Ð°Ñ€Ñ‘Ð½Ð°Ñ (100Ð³)', carbs: 10 },
                { name: 'ÐžÐ³ÑƒÑ€Ñ†Ñ‹/ÐŸÐ¾Ð¼Ð¸Ð´Ð¾Ñ€Ñ‹ (100Ð³)', carbs: 3.5 },
                { name: 'ÐšÐ°Ð¿ÑƒÑÑ‚Ð° ÑÐ²ÐµÐ¶Ð°Ñ (100Ð³)', carbs: 5 },
                { name: 'ÐŸÐµÑ€ÐµÑ† ÑÐ»Ð°Ð´ÐºÐ¸Ð¹ (100Ð³)', carbs: 6 }
            ]
        },
        {
            name: 'ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹',
            icon: 'ðŸ¥›',
            color: 'bg-blue-500',
            items: [
                { name: 'ÐœÐ¾Ð»Ð¾ÐºÐ¾ (200Ð¼Ð»)', carbs: 10 },
                { name: 'ÐšÐµÑ„Ð¸Ñ€/Ð ÑÐ¶ÐµÐ½ÐºÐ° (200Ð¼Ð»)', carbs: 8 },
                { name: 'Ð™Ð¾Ð³ÑƒÑ€Ñ‚ ÑÐ»Ð°Ð´ÐºÐ¸Ð¹ (150Ð³)', carbs: 18 },
                { name: 'Ð™Ð¾Ð³ÑƒÑ€Ñ‚ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ð¹ (150Ð³)', carbs: 7 },
                { name: 'Ð¡Ñ‹Ñ€Ð¾Ðº Ð³Ð»Ð°Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ (1 ÑˆÑ‚)', carbs: 16 },
                { name: 'Ð¢Ð²Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ Ð¼Ð°ÑÑÐ° (100Ð³)', carbs: 15 }
            ]
        },
        {
            name: 'Ð¡Ð»Ð°Ð´Ð¾ÑÑ‚Ð¸',
            icon: 'ðŸ«',
            color: 'bg-pink-500',
            items: [
                { name: 'Ð¡Ð°Ñ…Ð°Ñ€ (1 Ñ‡.Ð»., 5Ð³)', carbs: 5 },
                { name: 'ÐœÐµÐ´ (1 Ñ‡.Ð»., 10Ð³)', carbs: 8 },
                { name: 'Ð¨Ð¾ÐºÐ¾Ð»Ð°Ð´ Ð¼Ð¾Ð»Ð¾Ñ‡Ð½Ñ‹Ð¹ (30Ð³)', carbs: 17 },
                { name: 'ÐšÐ¾Ð½Ñ„ÐµÑ‚Ð° ÑˆÐ¾ÐºÐ¾Ð»Ð°Ð´Ð½Ð°Ñ (1 ÑˆÑ‚)', carbs: 8 },
                { name: 'Ð—ÐµÑ„Ð¸Ñ€ (1 ÑˆÑ‚, 35Ð³)', carbs: 28 },
                { name: 'ÐœÐ¾Ñ€Ð¾Ð¶ÐµÐ½Ð¾Ðµ Ð¿Ð»Ð¾Ð¼Ð±Ð¸Ñ€ (100Ð³)', carbs: 22 },
                { name: 'Ð¢Ð¾Ñ€Ñ‚ (100Ð³)', carbs: 55 },
                { name: 'Ð¥Ð°Ð»Ð²Ð° (30Ð³)', carbs: 15 },
                { name: 'Ð¡Ð³ÑƒÑ‰ÐµÐ½Ð½Ð¾Ðµ Ð¼Ð¾Ð»Ð¾ÐºÐ¾ (1 ÑÑ‚.Ð».)', carbs: 10 },
                { name: 'ÐšÐ²Ð°Ñ (200Ð¼Ð»)', carbs: 12 }
            ]
        }
    ],
    
    addCarbsToModal(item) {
        this.modalTotalCarbs += item.carbs;
        this.modalItemCount++;
        this.selectedItems.push({
            id: Date.now() + Math.random(),
            name: item.name,
            carbs: item.carbs
        });
    },

    removeItem(id) {
        const index = this.selectedItems.findIndex(i => i.id === id);
        if (index > -1) {
            this.modalTotalCarbs -= this.selectedItems[index].carbs;
            this.modalItemCount--;
            this.selectedItems.splice(index, 1);
        }
    },
    
    applyCarbs() {
        this.carbs = this.modalTotalCarbs;
        this.showCarbsTable = false;
    },
    
    openCarbsTable() {
        this.modalTotalCarbs = 0;
        this.modalItemCount = 0;
        this.selectedItems = [];
        this.showCarbsTable = true;
    }
}">
    {{ $slot }}
</div>